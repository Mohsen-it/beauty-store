import{j as e,c as t}from"./app.d210789f.js";import{r as a,G as r,S as s}from"./vendor.463d2c8a.js";import{A as i}from"./AdminLayout.82d8532d.js";import{m as d}from"./motion.6f439a0f.js";import"./DarkModeToggle.af833a04.js";const c=({order:c,statuses:n,paymentStatuses:m})=>{const[o,l]=a.useState(!1),[x,g]=a.useState(!1),{data:u,setData:h,post:p,processing:b,errors:k}=r({status:c.status,notify_customer:!0}),f=r({payment_status:c.payment_status,notify_customer:!0,comment:""}),y=e=>{const t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},j=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300";case"processing":return"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300";case"shipped":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300";case"delivered":return"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return e.jsxs(i,{title:`Order #${c.id}`,children:[e.jsx(s,{title:`Order #${c.id}`}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start gap-4",children:[" ",e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-cinematic-200",children:["Order #",c.id]})," ",e.jsxs("p",{className:"text-sm text-gray-500 dark:text-cinematic-400",children:["Placed on ",y(c.created_at)]})," "]}),e.jsxs("div",{className:"flex space-x-2 flex-shrink-0",children:[" ",e.jsx("a",{href:route("admin.orders.invoice",c.id),target:"_blank",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-600 dark:ring-offset-cinematic-800",children:"Generate Invoice"}),e.jsx("a",{href:route("admin.orders.packing-slip",c.id),target:"_blank",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-green-700 dark:hover:bg-green-600 dark:ring-offset-cinematic-800",children:"Packing Slip"})]})]}),e.jsxs("div",{className:"mb-6 bg-white dark:bg-cinematic-800 p-4 rounded-lg shadow dark:shadow-soft border border-cinematic-200 dark:border-cinematic-700",children:[" ",e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-cinematic-200",children:"Order Status"})," ",e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${j(c.status)}`,children:c.status.charAt(0).toUpperCase()+c.status.slice(1)})})]}),e.jsx("button",{type:"button",onClick:()=>l(!o),className:"px-4 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 dark:bg-pink-700 dark:hover:bg-pink-600 dark:ring-offset-cinematic-800",children:"Update Status"})]}),o&&e.jsx(d.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.5},className:"mt-4 border-t border-cinematic-200 dark:border-cinematic-700 pt-4",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),p(route("admin.orders.update-status",c.id),{onSuccess:()=>{l(!1),t.success("Order status updated successfully")},onError:()=>t.error("Failed to update order status")})},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-cinematic-300",children:[" ","New Status"]}),e.jsx("select",{id:"status",value:u.status,onChange:e=>h("status",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-cinematic-600 dark:bg-cinematic-700 dark:text-white shadow-sm focus:border-pink-500 focus:ring-pink-500",children:n.map((t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t)))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"notify_customer",type:"checkbox",checked:u.notify_customer,onChange:e=>h("notify_customer",e.target.checked),className:"h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300 dark:border-cinematic-600 dark:bg-cinematic-700 rounded"}),e.jsxs("label",{htmlFor:"notify_customer",className:"ml-2 block text-sm text-gray-700 dark:text-cinematic-300",children:[" ","Notify customer via email"]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"mr-3 px-4 py-2 border border-gray-300 dark:border-cinematic-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-cinematic-300 bg-white dark:bg-cinematic-700 hover:bg-gray-50 dark:hover:bg-cinematic-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 dark:ring-offset-cinematic-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-pink-600 hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 dark:bg-pink-700 dark:hover:bg-pink-600 dark:ring-offset-cinematic-800",children:b?"Updating...":"Update Status"})]})]})})]}),e.jsxs("div",{className:"mb-6 bg-white dark:bg-cinematic-800 p-4 rounded-lg shadow dark:shadow-soft border border-cinematic-200 dark:border-cinematic-700",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-cinematic-200",children:"Payment Information"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-cinematic-400",children:"Payment Method:"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-cinematic-300",children:[(e=>{switch(e){case"credit_card":return"Credit Card";case"cash_on_delivery":return"Cash on Delivery (COD)";default:return e}})(c.payment_method),"cash_on_delivery"===c.payment_method&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300",children:"COD"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-cinematic-400",children:"Payment Status:"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300";case"refunded":return"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}})(c.payment_status)}`,children:c.payment_status.charAt(0).toUpperCase()+c.payment_status.slice(1)})]})]})]}),"cash_on_delivery"===c.payment_method&&e.jsx("button",{type:"button",onClick:()=>g(!x),className:"px-4 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 dark:bg-amber-700 dark:hover:bg-amber-600 dark:ring-offset-cinematic-800",children:"Update Payment Status"})]}),x&&"cash_on_delivery"===c.payment_method&&e.jsx(d.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.5},className:"mt-4 border-t border-cinematic-200 dark:border-cinematic-700 pt-4",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),f.post(route("admin.orders.update-payment-status",c.id),{onSuccess:()=>{g(!1),t.success("Payment status updated successfully")},onError:()=>t.error("Failed to update payment status")})},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"payment_status",className:"block text-sm font-medium text-gray-700 dark:text-cinematic-300",children:"New Payment Status"}),e.jsx("select",{id:"payment_status",value:f.data.payment_status,onChange:e=>f.setData("payment_status",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-cinematic-600 dark:bg-cinematic-700 dark:text-white shadow-sm focus:border-amber-500 focus:ring-amber-500",children:m.map((t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t)))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"payment_notify_customer",type:"checkbox",checked:f.data.notify_customer,onChange:e=>f.setData("notify_customer",e.target.checked),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 dark:border-cinematic-600 dark:bg-cinematic-700 rounded"}),e.jsx("label",{htmlFor:"payment_notify_customer",className:"ml-2 block text-sm text-gray-700 dark:text-cinematic-300",children:"Notify customer via email"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"payment_comment",className:"block text-sm font-medium text-gray-700 dark:text-cinematic-300",children:"Comment (optional)"}),e.jsx("textarea",{id:"payment_comment",value:f.data.comment,onChange:e=>f.setData("comment",e.target.value),rows:"2",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-cinematic-600 dark:bg-cinematic-700 dark:text-white shadow-sm focus:border-amber-500 focus:ring-amber-500",placeholder:"Add a comment about this payment status update"})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"mr-3 px-4 py-2 border border-gray-300 dark:border-cinematic-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-cinematic-300 bg-white dark:bg-cinematic-700 hover:bg-gray-50 dark:hover:bg-cinematic-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 dark:ring-offset-cinematic-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f.processing,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-amber-600 hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 dark:bg-amber-700 dark:hover:bg-amber-600 dark:ring-offset-cinematic-800",children:f.processing?"Updating...":"Update Payment Status"})]})]})})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-cinematic-800 p-4 rounded-lg shadow dark:shadow-soft border border-cinematic-200 dark:border-cinematic-700",children:[" ",e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-cinematic-200 mb-4",children:"Customer Information"})," ",e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-900 dark:text-cinematic-300",children:[" ",e.jsx("span",{className:"font-medium",children:"Name:"})," ",c.first_name," ",c.last_name]}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-cinematic-300",children:[" ",e.jsx("span",{className:"font-medium",children:"Email:"})," ",c.email||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-cinematic-300",children:[" ",e.jsx("span",{className:"font-medium",children:"Phone:"})," ",c.phone||"N/A"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-cinematic-800 p-4 rounded-lg shadow dark:shadow-soft border border-cinematic-200 dark:border-cinematic-700",children:[" ",e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-cinematic-200 mb-4",children:"Shipping Address"})," ",e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-900 dark:text-cinematic-300",children:[c.first_name," ",c.last_name]})," ",e.jsx("p",{className:"text-sm text-gray-900 dark:text-cinematic-300",children:c.address})," ",e.jsxs("p",{className:"text-sm text-gray-900 dark:text-cinematic-300",children:[" ",c.city,", ",c.state||"N/A"," ",c.postal_code]}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-cinematic-300",children:c.country})," ",c.latitude&&c.longitude&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-cinematic-700",children:[e.jsxs("p",{className:"text-sm text-gray-900 dark:text-cinematic-300",children:[e.jsx("span",{className:"font-medium",children:"Geolocation:"})," Available"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-cinematic-400",children:["Lat: ",c.latitude,", Long: ",c.longitude]}),c.location_details&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-cinematic-400 mt-1",children:c.location_details}),e.jsxs("a",{href:`https://www.google.com/maps?q=${c.latitude},${c.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"mt-2 inline-flex items-center text-xs text-blue-600 dark:text-blue-400 hover:underline",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"View on Google Maps"]})]})]})]})]}),e.jsxs("div",{className:"mb-6 bg-white dark:bg-cinematic-800 rounded-lg shadow dark:shadow-soft overflow-hidden border border-cinematic-200 dark:border-cinematic-700",children:[" ",e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-cinematic-700",children:[" ",e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-cinematic-200",children:"Order Items"})," "]}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-cinematic-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-cinematic-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-cinematic-400 uppercase tracking-wider",children:"Product"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-cinematic-400 uppercase tracking-wider",children:"Price"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-cinematic-400 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-cinematic-400 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-cinematic-800 divide-y divide-gray-200 dark:divide-cinematic-700",children:c.items.map((t=>{var a;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-md object-cover bg-gray-200 dark:bg-cinematic-700",src:t.product.image?`/storage/${t.product.image.replace(/^\/storage\//,"")}?v=${(new Date).getTime()}`:t.product.images&&(null==(a=t.product.images[0])?void 0:a.url)?t.product.images[0].image_url?`${t.product.images[0].image_url}?v=${(new Date).getTime()}`:`/storage/${t.product.images[0].url}?v=${(new Date).getTime()}`:`/assets/default-product.png?v=${(new Date).getTime()}`,alt:t.product.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-cinematic-200",children:t.product.name})," ",e.jsx("div",{className:"text-sm text-gray-500 dark:text-cinematic-400",children:t.product.sku||"No SKU"})," "]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-cinematic-300",children:["$",t.price]})," "]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-cinematic-300",children:t.quantity})," "]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-cinematic-300",children:["$",(t.price*t.quantity).toFixed(2)]})," "]})]},t.id)}))}),e.jsxs("tfoot",{className:"bg-gray-50 dark:bg-cinematic-700",children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-cinematic-200",children:"Subtotal"}),e.jsxs("td",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-cinematic-200",children:["$",c.subtotal]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-cinematic-200",children:"Shipping"}),e.jsxs("td",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-cinematic-200",children:["$",c.shipping]})]}),c.discount>0&&e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-cinematic-200",children:"Discount"}),e.jsxs("td",{className:"px-6 py-4 text-right text-sm font-medium text-pink-600 dark:text-pink-400",children:["-$",c.discount]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-cinematic-200",children:"Tax"}),e.jsxs("td",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-cinematic-200",children:["$",c.tax]})]}),e.jsxs("tr",{className:"bg-gray-100 dark:bg-cinematic-900",children:[e.jsx("td",{colSpan:"3",className:"px-6 py-4 text-right text-base font-bold text-gray-900 dark:text-white",children:"Total"}),e.jsxs("td",{className:"px-6 py-4 text-right text-base font-bold text-gray-900 dark:text-white",children:["$",c.total]})]})]})]})]}),c.notes&&e.jsxs("div",{className:"mb-6 bg-white dark:bg-cinematic-800 p-4 rounded-lg shadow dark:shadow-soft border border-cinematic-200 dark:border-cinematic-700",children:[" ",e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-cinematic-200 mb-2",children:"Order Notes"})," ",e.jsx("p",{className:"text-sm text-gray-700 dark:text-cinematic-300",children:c.notes})," "]}),e.jsxs("div",{className:"bg-white dark:bg-cinematic-800 p-4 rounded-lg shadow dark:shadow-soft border border-cinematic-200 dark:border-cinematic-700",children:[" ",e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-cinematic-200 mb-4",children:"Order Timeline"})," ",e.jsx("div",{className:"flow-root",children:e.jsx("ul",{className:"-mb-8",children:c.history.map(((t,a)=>e.jsx("li",{children:e.jsxs("div",{className:"relative pb-8",children:[a!==c.history.length-1?e.jsx("span",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200 dark:bg-cinematic-700","aria-hidden":"true"}):null,e.jsxs("div",{className:"relative flex space-x-3",children:[e.jsx("div",{children:e.jsxs("span",{className:`h-8 w-8 rounded-full flex items-center justify-center ring-8 ring-white dark:ring-cinematic-800 ${j(t.status)}`,children:[" ",e.jsx("svg",{className:"h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707a1 1 0 00-1.414-1.414L9 11.586 7.707 10.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]})}),e.jsxs("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-900 dark:text-cinematic-300",children:[" ","Status changed to ",e.jsx("span",{className:"font-medium",children:t.status}),t.comment&&e.jsxs("span",{children:[" - ",t.comment]})]})}),e.jsxs("div",{className:"text-right text-sm whitespace-nowrap text-gray-500 dark:text-cinematic-400",children:[" ",y(t.created_at)]})]})]})]})},t.id)))})})]})]})};export{c as default};
