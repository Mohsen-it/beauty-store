var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,c=(t,i,a)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,n=(e,t)=>{for(var i in t||(t={}))s.call(t,i)&&c(e,i,t[i]);if(a)for(var i of a(t))r.call(t,i)&&c(e,i,t[i]);return e},o=(e,a)=>t(e,i(a));import{c as d,j as l}from"./app.6abe3997.js";import{r as m,G as x,b as h,S as p,x as u}from"./vendor.463d2c8a.js";import{t as g,C as w}from"./CinematicLayout.d84a58c9.js";import{g as v}from"./csrf.3e859a8d.js";import{m as f}from"./motion.6f439a0f.js";import"./DarkModeToggle.fa9817ee.js";const k=m.memo((({cart:e})=>{const[t,i]=m.useState((()=>{const t={};return e.items&&e.items.length>0&&e.items.forEach((e=>{t[e.id]=e.quantity})),t})),[a,s]=m.useState({}),[r,c]=m.useState(!1),[k,y]=m.useState(0===e.items.length);m.useMemo((()=>e.items||[]),[e.items]);const{delete:j,processing:b}=x(),N=m.useMemo((()=>e.items&&0!==e.items.length?e.items.reduce(((e,i)=>{const a=t[i.id]||i.quantity;return e+parseFloat(i.price)*a}),0):0),[e.items,t]),C=m.useMemo((()=>.05*N),[N]),_=m.useMemo((()=>N+10+C),[N,C]),M=m.useCallback((a=>{s((e=>o(n({},e),{[a]:!0})));const r=v();h.delete(route("cart.remove",a),{headers:r}).then((r=>{d.success(g("cart.remove_success")),r.data&&void 0!==r.data.count&&window.dispatchEvent(new CustomEvent("cart-updated",{detail:{count:r.data.count}}));const c=e.items.filter((e=>e.id!==a));e.items=c,0===c.length&&y(!0);const l=n({},t);delete l[a],i(l),s((e=>o(n({},e),{[a]:!1})))})).catch((e=>{d.error(g("cart.remove_failed")),s((e=>o(n({},e),{[a]:!1})))}))}),[e.items,t,g]),H=e=>{const i=t[e.id]||e.quantity;return(parseFloat(e.price)*i).toFixed(2)},$={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return l.jsxs(w,{children:[l.jsx(p,{title:`${g("cart.shopping_cart")} - ${g("app.title")}`}),l.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8",children:[l.jsx(f.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-xl sm:text-2xl md:text-3xl font-bold text-cinematic-900 dark:text-white mb-4 sm:mb-6 md:mb-8",children:g("cart.shopping_cart")}),!k&&e.items&&e.items.length>0?l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6 lg:gap-8",children:[l.jsx(f.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"lg:col-span-8 order-2 lg:order-1",children:l.jsxs("div",{className:"bg-white dark:bg-cinematic-800 rounded-lg shadow-md dark:shadow-soft overflow-hidden border border-cinematic-200 dark:border-cinematic-700",children:[l.jsx("ul",{className:"divide-y divide-cinematic-200 dark:divide-cinematic-700",children:e.items.map((r=>{var c,m;return l.jsx(f.li,{variants:$,className:"p-3 sm:p-4 md:p-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[l.jsx("div",{className:"flex-shrink-0 w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-lg overflow-hidden mx-auto sm:mx-0",children:l.jsx("img",{src:r.product.image_url?r.product.image_url:r.product.image?`/storage/${r.product.image}?v=${(new Date).getTime()}`:r.product.images&&(null==(c=r.product.images[0])?void 0:c.image_url)?r.product.images[0].image_url:r.product.images&&(null==(m=r.product.images[0])?void 0:m.url)?`/storage/${r.product.images[0].url}?v=${(new Date).getTime()}`:`/assets/default-product.png?v=${(new Date).getTime()}`,alt:r.product.name,className:"w-full h-full object-cover object-center"})}),l.jsxs("div",{className:"sm:ml-6 flex-1",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-base sm:text-lg font-medium text-cinematic-900 dark:text-white",children:l.jsx(u,{href:route("products.show",r.product.slug),className:"hover:text-pink-600 dark:hover:text-pink-400",children:r.product.name})}),l.jsx("p",{className:"mt-1 text-xs sm:text-sm text-cinematic-500 dark:text-cinematic-400",children:r.product.category.name}),l.jsxs("p",{className:"mt-1 text-base sm:text-lg font-medium text-cinematic-900 dark:text-white sm:hidden",children:["$",r.price]})]}),l.jsxs("p",{className:"hidden sm:block text-base sm:text-lg font-medium text-cinematic-900 dark:text-white",children:["$",r.price]})]}),l.jsxs("div",{className:"mt-3 sm:mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[l.jsx("div",{className:"flex items-center mb-3 sm:mb-0",children:l.jsxs("div",{className:"flex items-center border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden shadow-sm",children:[l.jsx(f.button,{whileTap:{scale:.95},type:"button",onClick:()=>(a=>{const r=e.items.find((e=>e.id===a)),c=t[a]||r.quantity;if(c>1){s((e=>o(n({},e),{[a]:!0})));const e=c-1;i((t=>o(n({},t),{[a]:e})));const t=v();h.patch(route("cart.update",a),{quantity:e},{headers:t}).then((e=>{d.success(g("cart.update_success")),e.data&&void 0!==e.data.count&&window.dispatchEvent(new CustomEvent("cart-updated",{detail:{count:e.data.count}})),s((e=>o(n({},e),{[a]:!1})))})).catch((e=>{d.error(g("cart.update_failed")),i((e=>o(n({},e),{[a]:c}))),s((e=>o(n({},e),{[a]:!1})))}))}})(r.id),disabled:b||a[r.id]||(t[r.id]||r.quantity)<=1,className:`p-3 sm:p-3 min-w-[44px] min-h-[44px] ${(t[r.id]||r.quantity)<=1?"text-cinematic-300 dark:text-cinematic-600 bg-gray-100 dark:bg-gray-800":"text-cinematic-600 dark:text-cinematic-400 hover:text-pink-600 dark:hover:text-pink-400 hover:bg-gray-100 dark:hover:bg-gray-800"} focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-opacity-50 transition-all duration-200`,"aria-label":g("cart.decrease_quantity"),children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"w-10 sm:w-12 text-center text-cinematic-700 dark:text-cinematic-300 relative font-medium",children:[l.jsx("span",{className:a[r.id]?"opacity-0":"opacity-100 transition-opacity duration-200",children:t[r.id]||r.quantity}),a[r.id]&&l.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("svg",{className:"animate-spin h-4 w-4 text-pink-600 dark:text-pink-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]}),l.jsx(f.button,{whileTap:{scale:.95},type:"button",onClick:()=>(a=>{const r=e.items.find((e=>e.id===a)),c=t[a]||r.quantity;if(r&&c<r.product.stock){s((e=>o(n({},e),{[a]:!0})));const e=c+1;i((t=>o(n({},t),{[a]:e})));const t=v();h.patch(route("cart.update",a),{quantity:e},{headers:t}).then((e=>{d.success(g("cart.update_success")),e.data&&void 0!==e.data.count&&window.dispatchEvent(new CustomEvent("cart-updated",{detail:{count:e.data.count}})),s((e=>o(n({},e),{[a]:!1})))})).catch((e=>{d.error(g("cart.update_failed")),i((e=>o(n({},e),{[a]:c}))),s((e=>o(n({},e),{[a]:!1})))}))}})(r.id),disabled:b||a[r.id]||(t[r.id]||r.quantity)>=r.product.stock,className:`p-3 sm:p-3 min-w-[44px] min-h-[44px] ${(t[r.id]||r.quantity)>=r.product.stock?"text-cinematic-300 dark:text-cinematic-600 bg-gray-100 dark:bg-gray-800":"text-cinematic-600 dark:text-cinematic-400 hover:text-pink-600 dark:hover:text-pink-400 hover:bg-gray-100 dark:hover:bg-gray-800"} focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-opacity-50 transition-all duration-200`,"aria-label":g("cart.increase_quantity"),children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})})})]})}),l.jsxs("div",{className:"flex items-center justify-between sm:justify-end",children:[l.jsxs("p",{className:"text-base sm:text-lg font-medium text-cinematic-900 dark:text-white mr-3 sm:mr-4",children:["$",H(r)]}),l.jsx(f.button,{whileTap:{scale:.9},whileHover:{backgroundColor:"rgba(239, 68, 68, 0.1)"},type:"button",onClick:()=>M(r.id),disabled:b||a[r.id],className:`p-3 sm:p-3 rounded-full min-w-[44px] min-h-[44px] ${a[r.id]?"text-gray-400 dark:text-gray-500":"text-cinematic-500 dark:text-cinematic-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-800"} focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 transition-all duration-200 relative`,"aria-label":g("cart.remove_item"),children:a[r.id]?l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]})]})]})},r.id)}))}),l.jsx("div",{className:"p-3 sm:p-4 md:p-6 border-t border-cinematic-200 dark:border-cinematic-700",children:l.jsx(f.button,{whileHover:{x:3},whileTap:{scale:.98},type:"button",onClick:()=>{c(!0);const e=v();h.delete(route("cart.clear"),{headers:e}).then((()=>{d.success(g("cart.clear_success")),window.dispatchEvent(new CustomEvent("cart-updated",{detail:{count:0}})),y(!0),i({}),c(!1)})).catch((e=>{d.error("Failed to clear cart"),c(!1)}))},disabled:r,className:`text-sm px-3 py-2 rounded-md min-h-[44px] ${r?"text-gray-400 dark:text-gray-500":"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/10"} focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 transition-all duration-200 flex items-center`,children:r?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g("common.clearing")]}):l.jsxs(l.Fragment,{children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),g("common.clear_cart")]})})})]})}),l.jsx(f.div,{initial:{opacity:0,y:20,x:0},animate:{opacity:1,y:0,x:0},transition:{duration:.5},className:"lg:col-span-4 order-1 lg:order-2",children:l.jsxs("div",{className:"bg-white dark:bg-cinematic-800 rounded-lg shadow-md dark:shadow-soft p-4 sm:p-5 md:p-6 border border-cinematic-200 dark:border-cinematic-700 lg:sticky lg:top-24",children:[l.jsx("h2",{className:"text-base sm:text-lg font-medium text-cinematic-900 dark:text-white mb-3 sm:mb-4 md:mb-6",children:g("checkout.order_summary")}),l.jsx("div",{className:"flow-root",children:l.jsxs("dl",{className:"text-sm",children:[l.jsxs("div",{className:"py-2 flex items-center justify-between",children:[l.jsx("dt",{className:"text-cinematic-600 dark:text-cinematic-400",children:g("common.subtotal")}),l.jsxs("dd",{className:"font-medium text-cinematic-900 dark:text-white",children:["$",N.toFixed(2)]})]}),l.jsxs("div",{className:"py-2 flex items-center justify-between",children:[l.jsx("dt",{className:"text-cinematic-600 dark:text-cinematic-400",children:g("common.shipping")}),l.jsxs("dd",{className:"font-medium text-cinematic-900 dark:text-white",children:["$",10..toFixed(2)]})]}),l.jsxs("div",{className:"py-2 flex items-center justify-between",children:[l.jsx("dt",{className:"text-cinematic-600 dark:text-cinematic-400",children:g("common.tax")}),l.jsxs("dd",{className:"font-medium text-cinematic-900 dark:text-white",children:["$",C.toFixed(2)]})]}),l.jsxs("div",{className:"py-2 border-t border-cinematic-200 dark:border-cinematic-700 flex items-center justify-between",children:[l.jsx("dt",{className:"text-base font-medium text-cinematic-900 dark:text-white",children:g("common.total")}),l.jsxs("dd",{className:"text-base font-medium text-pink-600 dark:text-pink-400",children:["$",_.toFixed(2)]})]})]})}),l.jsx("div",{className:"mt-6",children:l.jsx(f.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:l.jsxs(u,{href:route("checkout"),className:"w-full bg-gradient-to-r from-pink-500 to-pink-600 hover:from-pink-600 hover:to-pink-700 dark:from-pink-600 dark:to-pink-700 dark:hover:from-pink-500 dark:hover:to-pink-600 text-white py-3 sm:py-4 px-4 sm:px-6 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 dark:focus:ring-offset-cinematic-800 text-center font-medium transition-all duration-300 flex items-center justify-center text-sm sm:text-base shadow-md hover:shadow-lg min-h-[44px]",children:[l.jsx("span",{children:g("common.proceed_to_checkout")}),l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})}),l.jsx("div",{className:"mt-5",children:l.jsx(f.div,{whileHover:{x:-3},whileTap:{scale:.98},children:l.jsxs(u,{href:route("products.index"),className:"text-sm sm:text-base text-pink-600 dark:text-pink-400 hover:text-pink-800 dark:hover:text-pink-300 flex items-center justify-center py-2 transition-all duration-200",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),l.jsx("span",{children:g("common.continue_shopping")})]})})})]})})]}):l.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center py-8 sm:py-10 md:py-16 px-4 sm:px-6 md:px-8 bg-white dark:bg-cinematic-800 rounded-xl shadow-md dark:shadow-soft border border-cinematic-200 dark:border-cinematic-700",children:l.jsxs("div",{className:"max-w-md mx-auto",children:[l.jsx(f.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:200},children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 mx-auto text-cinematic-400 dark:text-cinematic-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}),l.jsx(f.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-5 sm:mt-6 text-xl sm:text-2xl font-medium text-cinematic-900 dark:text-white",children:g("common.empty_cart")}),l.jsx(f.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-3 text-sm sm:text-base text-cinematic-600 dark:text-cinematic-400 max-w-xs mx-auto",children:g("common.cart_empty_message")}),l.jsx(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},whileHover:{scale:1.05},whileTap:{scale:.95},className:"mt-6 sm:mt-8",children:l.jsxs(u,{href:route("products.index"),className:"inline-flex items-center px-5 sm:px-6 py-3 sm:py-4 bg-gradient-to-r from-pink-500 to-pink-600 hover:from-pink-600 hover:to-pink-700 dark:from-pink-600 dark:to-pink-700 dark:hover:from-pink-500 dark:hover:to-pink-600 text-white font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 dark:focus:ring-offset-cinematic-800 transition-all duration-300 text-sm sm:text-base shadow-md hover:shadow-lg min-h-[44px]",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),l.jsx("span",{children:g("common.browse_products")})]})})]})})]})]})}));k.displayName="CartIndex";export{k as default};
