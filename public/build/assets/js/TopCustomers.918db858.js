import{j as e}from"./app.6abe3997.js";import{r as t,S as r}from"./vendor.463d2c8a.js";import{A as a}from"./AdminLayout.16524a9f.js";import{C as s,a as i,L as c,B as o,p as d,c as n,d as l,f as m}from"./chart.e59e89b8.js";import{m as x}from"./motion.6f439a0f.js";import"./DarkModeToggle.fa9817ee.js";s.register(i,c,o,d,n,l);const p=({customersData:s,timeRanges:i})=>{const[c,o]=t.useState("month"),[d,n]=t.useState(10),[l,p]=t.useState(null),[h,g]=t.useState({});t.useEffect((()=>{if(s){const e=document.documentElement.classList.contains("dark"),t=e?"#e5e7eb":"#1f2937",r=e?"rgba(55, 65, 81, 0.3)":"rgba(209, 213, 219, 0.3)",a=e?"rgba(31, 41, 55, 0.8)":"rgba(255, 255, 255, 0.8)",i=e?"rgba(107, 114, 128, 0.5)":"rgba(209, 213, 219, 0.5)";p({labels:s.map((e=>e.name)),datasets:[{label:"Orders Count",data:s.map((e=>e.orders_count)),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1},{label:"Total Spent",data:s.map((e=>e.total_spent)),backgroundColor:"rgba(236, 72, 153, 0.5)",borderColor:"rgba(236, 72, 153, 1)",borderWidth:1}]}),g({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:t}},title:{display:!0,text:`Top ${d} Customers - ${c.charAt(0).toUpperCase()+c.slice(1)}`,color:t},tooltip:{titleColor:t,bodyColor:t,backgroundColor:a,borderColor:i,borderWidth:1}},scales:{x:{ticks:{color:t},grid:{color:r}},y:{beginAtZero:!0,ticks:{color:t},grid:{color:r}}}})}}),[s,c,d]);const u=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),b=e=>{const t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)};return e.jsxs(a,{title:"Top Customers Report",children:[e.jsx(r,{title:"Top Customers Report"}),e.jsxs("div",{className:"mb-6 bg-white dark:bg-cinematic-800 p-4 rounded-lg shadow dark:shadow-soft border border-cinematic-200 dark:border-cinematic-700",children:[" ",e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timeRange",className:"block text-sm font-medium text-gray-700 dark:text-cinematic-300",children:"Time Period"})," ",e.jsxs("select",{id:"timeRange",value:c,onChange:e=>o(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-cinematic-600 dark:bg-cinematic-700 dark:text-white shadow-sm focus:border-pink-500 focus:ring-pink-500",children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"}),e.jsx("option",{value:"all",children:"All Time"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"limit",className:"block text-sm font-medium text-gray-700 dark:text-cinematic-300",children:"Number of Customers"})," ",e.jsxs("select",{id:"limit",value:d,onChange:e=>n(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-cinematic-600 dark:bg-cinematic-700 dark:text-white shadow-sm focus:border-pink-500 focus:ring-pink-500",children:[e.jsx("option",{value:"5",children:"Top 5"}),e.jsx("option",{value:"10",children:"Top 10"}),e.jsx("option",{value:"20",children:"Top 20"}),e.jsx("option",{value:"50",children:"Top 50"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{window.location.href=route("admin.reports.top-customers",{period:c,limit:d})},className:"px-4 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 dark:bg-pink-700 dark:hover:bg-pink-600 dark:ring-offset-cinematic-800",children:"Apply Filters"})})]})]}),e.jsxs("div",{className:"mb-6 flex justify-end space-x-2",children:[e.jsx("a",{href:route("admin.reports.export",{type:"top-customers",format:"pdf",period:c,limit:d}),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:bg-red-700 dark:hover:bg-red-600 dark:ring-offset-cinematic-800",target:"_blank",children:"Export PDF"}),e.jsx("a",{href:route("admin.reports.export",{type:"top-customers",format:"excel",period:c,limit:d}),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-green-700 dark:hover:bg-green-600 dark:ring-offset-cinematic-800",target:"_blank",children:"Export Excel"})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white dark:bg-cinematic-800 p-6 rounded-lg shadow dark:shadow-soft mb-6 border border-cinematic-200 dark:border-cinematic-700",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-cinematic-200 mb-4",children:"Top Customers Overview"})," ",e.jsx("div",{className:"relative h-96",children:l&&e.jsx(m,{data:l,options:h})})]}),e.jsxs("div",{className:"bg-white dark:bg-cinematic-800 shadow dark:shadow-soft overflow-hidden sm:rounded-md border border-cinematic-200 dark:border-cinematic-700",children:[" ",e.jsxs("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200 dark:border-cinematic-700",children:[" ",e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 dark:text-cinematic-200",children:"Detailed Customer Data"})," "]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-cinematic-700",children:[" ",e.jsxs("thead",{className:"bg-gray-50 dark:bg-cinematic-700",children:[" ",e.jsxs("tr",{children:[e.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-cinematic-400 uppercase tracking-wider",children:[" ","Rank"]}),e.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-cinematic-400 uppercase tracking-wider",children:[" ","Customer"]}),e.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-cinematic-400 uppercase tracking-wider",children:[" ","Joined"]}),e.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-cinematic-400 uppercase tracking-wider",children:[" ","Orders"]}),e.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-cinematic-400 uppercase tracking-wider",children:[" ","Total Spent"]}),e.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-cinematic-400 uppercase tracking-wider",children:[" ","Average Order"]}),e.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-cinematic-400 uppercase tracking-wider",children:[" ","Last Order"]})]})]}),e.jsxs("tbody",{className:"bg-white dark:bg-cinematic-800 divide-y divide-gray-200 dark:divide-cinematic-700",children:[" ",null==s?void 0:s.map(((t,r)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-cinematic-700/50",children:[" ",e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-cinematic-300",children:[" ",r+1]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsxs("div",{className:"h-10 w-10 rounded-full bg-gray-200 dark:bg-cinematic-600 flex items-center justify-center text-gray-500 dark:text-cinematic-300",children:[" ",t.name.charAt(0).toUpperCase()]})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-cinematic-200",children:t.name})," ",e.jsx("div",{className:"text-sm text-gray-500 dark:text-cinematic-400",children:t.email})," "]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-cinematic-300",children:[" ",b(t.created_at)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-cinematic-300",children:[" ",t.orders_count]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-cinematic-300",children:[" ",u(t.total_spent)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-cinematic-300",children:[" ",u(t.average_order)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-cinematic-300",children:[" ",b(t.last_order_date)]})]},t.id)))]})]})})]})]})};export{p as default};
