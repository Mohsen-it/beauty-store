var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,o=(e,o)=>{for(var s in o||(o={}))r.call(o,s)&&a(e,s,o[s]);if(t)for(var s of t(o))n.call(o,s)&&a(e,s,o[s]);return e};import{j as s}from"./app.6abe3997.js";import{r as c}from"./vendor.463d2c8a.js";const i=c.memo((e=>{var a=e,{src:i,webpSrc:l,placeholderSrc:u,alt:d,className:p="",sizes:f=null,width:h,height:m,priority:y=!1}=a,b=((e,a)=>{var o={};for(var s in e)r.call(e,s)&&a.indexOf(s)<0&&(o[s]=e[s]);if(null!=e&&t)for(var s of t(e))a.indexOf(s)<0&&n.call(e,s)&&(o[s]=e[s]);return o})(a,["src","webpSrc","placeholderSrc","alt","className","sizes","width","height","priority"]);const[g,v]=c.useState(!1),[w,j]=c.useState(y),[x,S]=c.useState(!1),k=c.useRef(null),O=c.useRef(null);c.useEffect((()=>{if(y||w)return;const e=new IntersectionObserver((t=>{t[0].isIntersecting&&(j(!0),e.disconnect())}),{rootMargin:"50px",threshold:.1});return O.current=e,k.current&&e.observe(k.current),()=>{O.current&&O.current.disconnect()}}),[y,w]);const N=c.useCallback((()=>{v(!0)}),[]),R=c.useCallback((()=>{S(!0),v(!0)}),[]),E=w?i:u||i,L=f||void 0;return s.jsxs("div",{ref:k,className:`relative overflow-hidden ${p}`,style:{width:h,height:m},children:[l&&w?s.jsxs("picture",{children:[s.jsx("source",{srcSet:l,type:"image/webp"}),s.jsx("source",{srcSet:i,type:`image/${i.split(".").pop()}`}),s.jsx("img",o({src:i,alt:d,className:"w-full h-full object-cover transition-opacity duration-300 "+(g?"opacity-100":"opacity-0"),loading:y?"eager":"lazy",decoding:"async",onLoad:N,onError:R,sizes:L,width:h,height:m},b))]}):s.jsx("img",o({src:x?"/assets/default-product.png":E,alt:d,className:"w-full h-full object-cover transition-opacity duration-300 "+(g?"opacity-100":"opacity-0"),loading:y?"eager":"lazy",decoding:"async",onLoad:N,onError:R,sizes:L,width:h,height:m},b)),u&&!g&&s.jsx("img",{src:u,alt:"",className:"absolute inset-0 w-full h-full object-cover blur-sm scale-105","aria-hidden":"true"}),!g&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800 bg-opacity-30 dark:bg-opacity-30",children:s.jsx("div",{className:"w-8 h-8 border-2 border-pink-500 border-t-transparent rounded-full animate-spin"})})]})})),l=(e=!0)=>{const t={},r=(()=>{try{const e=document.head.querySelector('meta[name="csrf-token"]');if(e&&e.content)return e.content;const t=document.body.querySelector('meta[name="csrf-token"]');if(t&&t.content)return t.content;if(window.Laravel&&window.Laravel.csrfToken)return window.Laravel.csrfToken;const r=document.cookie.split(";");for(let n=0;n<r.length;n++){const e=r[n].trim();if(e.startsWith("XSRF-TOKEN="))return e.substring(11)}return null}catch(e){return null}})();return r&&(r.includes("%")?t["X-XSRF-TOKEN"]=r:t["X-CSRF-TOKEN"]=r),e&&(t["Content-Type"]="application/json",t.Accept="application/json"),t["X-Requested-With"]="XMLHttpRequest",t},u=()=>{return e=void 0,t=null,r=function*(){try{(yield fetch("/sanctum/csrf-cookie",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).ok}catch(e){}},new Promise(((n,a)=>{var o=e=>{try{c(r.next(e))}catch(t){a(t)}},s=e=>{try{c(r.throw(e))}catch(t){a(t)}},c=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,s);c((r=r.apply(e,t)).next())}));var e,t,r};export{i as L,l as g,u as r};
