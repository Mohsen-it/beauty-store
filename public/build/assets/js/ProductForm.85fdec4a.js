import{j as e}from"./app.24630b9d.js";import{r as s,G as t,x as r}from"./vendor.463d2c8a.js";const a=({categories:a,product:i=null,isEditing:l=!1})=>{const[c,d]=s.useState([]),[n,o]=s.useState(i&&i.images?i.images:[]),{data:m,setData:u,post:p,put:x,processing:h,errors:g,reset:j}=t({name:i?i.name:"",description:i?i.description:"",price:i?i.price:"",sale_price:i?i.sale_price:"",category_id:i?i.category_id:"",stock_quantity:i?i.stock_quantity:"",is_featured:!!i&&i.is_featured,status:i?i.status:"active",images:[]});return e.jsx("form",{onSubmit:e=>{e.preventDefault(),l?x(route("admin.products.update",i.id)):p(route("admin.products.store"))},className:"space-y-6",children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:l?"Edit Product":"Add New Product"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Product Name"}),e.jsx("input",{id:"name",type:"text",className:"form-input "+(g.name?"border-red-500":""),value:m.name,onChange:e=>u("name",e.target.value),required:!0}),g.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category_id",className:"form-label",children:"Category"}),e.jsxs("select",{id:"category_id",className:"form-input "+(g.category_id?"border-red-500":""),value:m.category_id,onChange:e=>u("category_id",e.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),a.map((s=>e.jsx("option",{value:s.id,children:s.name},s.id)))]}),g.category_id&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.category_id})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:"form-label",children:"Regular Price ($)"}),e.jsx("input",{id:"price",type:"number",step:"0.01",min:"0",className:"form-input "+(g.price?"border-red-500":""),value:m.price,onChange:e=>u("price",e.target.value),required:!0}),g.price&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.price})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sale_price",className:"form-label",children:"Sale Price ($)"}),e.jsx("input",{id:"sale_price",type:"number",step:"0.01",min:"0",className:"form-input "+(g.sale_price?"border-red-500":""),value:m.sale_price,onChange:e=>u("sale_price",e.target.value)}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Leave empty if not on sale"}),g.sale_price&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.sale_price})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"stock_quantity",className:"form-label",children:"Stock Quantity"}),e.jsx("input",{id:"stock_quantity",type:"number",min:"0",className:"form-input "+(g.stock_quantity?"border-red-500":""),value:m.stock_quantity,onChange:e=>u("stock_quantity",e.target.value),required:!0}),g.stock_quantity&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.stock_quantity})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),e.jsxs("select",{id:"status",className:"form-input "+(g.status?"border-red-500":""),value:m.status,onChange:e=>u("status",e.target.value),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"archived",children:"Archived"})]}),g.status&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.status})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"is_featured",type:"checkbox",className:"h-4 w-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500",checked:m.is_featured,onChange:e=>u("is_featured",e.target.checked)}),e.jsx("label",{htmlFor:"is_featured",className:"ml-2 block text-sm text-gray-700",children:"Featured Product"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),e.jsx("textarea",{id:"description",rows:"4",className:"form-input "+(g.description?"border-red-500":""),value:m.description,onChange:e=>u("description",e.target.value),required:!0}),g.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Product Images"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"images",className:"relative cursor-pointer bg-white rounded-md font-medium text-pink-600 hover:text-pink-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-pink-500",children:[e.jsx("span",{children:"Upload images"}),e.jsx("input",{id:"images",name:"images",type:"file",className:"sr-only",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){const s=Array.from(e.target.files);d(s);const t=s.map((e=>URL.createObjectURL(e)));o([...n,...t]),u("images",[...m.images,...e.target.files])}}})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})}),g.images&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.images}),n.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6",children:n.map(((s,t)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-md bg-gray-200",children:e.jsx("img",{src:s,alt:`Preview ${t+1}`,className:"h-full w-full object-cover object-center"})}),e.jsxs("button",{type:"button",onClick:()=>(e=>{const s=[...n];if(s.splice(e,1),o(s),e<c.length){const s=[...c];s.splice(e,1),d(s);const t=[...m.images];t.splice(e,1),u("images",t)}})(t),className:"absolute top-0 right-0 -mt-2 -mr-2 inline-flex h-6 w-6 items-center justify-center rounded-full border border-gray-200 bg-white text-gray-400 hover:text-red-500 focus:outline-none",children:[e.jsx("span",{className:"sr-only",children:"Remove image"}),e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]},t)))})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 text-right",children:[e.jsx(r,{href:route("admin.products.index"),className:"btn btn-secondary mr-2",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?"Saving...":l?"Update Product":"Create Product"})]})]})})};export{a as default};
